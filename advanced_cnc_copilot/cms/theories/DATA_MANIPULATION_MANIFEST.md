# MANIFEST OF SAFE DATA MANIPULATION
## Protocols for Injecting Generative Data into Fanuc Systems

> **Philosophy**: "Innovate the Geometry, Conserve the Physics."
> **Purpose**: To define the rigid boundaries for using LLM-generated parameters on live hardware.

---

## 1. The Core Principle: "The Dopamine Filter"
No data generated by an LLM or Algorithmic process may touch the machine registers (`D0000`, `R0000`) without passing through the **Impact Cortex Validation Layer**.

### The Flow
1.  **Generator (LLM)**: Proposes `RPM=15000, FEED=8000`.
2.  **Filter (Dopamine)**: Calculates `Risk = (RPM * FEED) / MaterialLimit`.
3.  **Actuator (HAL)**:
    *   If `Risk < 0.8`: **Permit** (`cnc_wrparam`).
    *   If `Risk >= 0.8`: **Clamp** to Safe Limit (`RPM=12000`).

---

## 2. Safe Parameter Boundaries (The Mantinels)

### A. Spindle Speed (`S-Code`)
*   **Manipulation Rule**: LLM can suggest *optimal* speeds based on acoustics.
*   **Safety Limit**: Never exceed `Max_Rated_RPM * 0.9`.
*   **Fanuc Parameter**: `P3741` (Spindle Max Speed check).

### B. Feed Rate (`F-Code`)
*   **Manipulation Rule**: LLM can vary feed to break harmonics (Variable Spindle Speed/Feed).
*   **Safety Limit**: `Chip_Load` must not exceed Tool Manufacturer Spec.
*   **Physics Check**: `Feed < (RPM * Flute_Count * Max_Chip_Load)`.

### C. Acceleration / Jerk (AI Contour Control)
*   **Manipulation Rule**: LLM can switch between `G05.1 Q1` (AI APC) modes R1-R10.
*   **Safety Limit**: Do not switch modes *during* a cut. Output `G4 P1` (Dwell) before mode change.
*   **Reason**: Sudden jerk changes cause surface marks or servo overload.

---

## 3. Data Injection Techniques (Authorized)

### 1. Macro Variable Injection (`#500-#999`)
*   **Safe**: Writing to Macro Variables is safe. The CNC program *reads* them.
*   **Use Case**: LLM writes `Target_Part_Width` to `#501`. The macro program `O9001` reads `#501` and adjusts the probing path.
*   **Benefit**: The machine logic (G-Code) remains static and proven; only the *variables* change.

### 2. PMC Data Table Injection (`D-Data`)
*   **Conditional**: Only for non-motion data (e.g., "Pallet ID").
*   **Risk**: Do not write to `G-Addresses` (Output Relays) directly from Python.

---

## 4. The "Kill Switch" Protocol
If the **Sensory Cortex** detects that the *Real* Physics diverges from the *Generative* Prediction by > 10%:
1.  **Immediate Action**: Feed Hold (`STP`).
2.  **Data Lock**: Reject all future LLM tokens.
3.  **Fallback**: Revert to `elements_db.py` (The "Seed" Knowledge).
